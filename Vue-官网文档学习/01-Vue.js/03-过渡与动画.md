# 03 过渡 & 动画


## 目录(Catalog)
* 3.1 进入/离开 & 列表过渡
    - 3.1.1 概述
    - 3.1.2 单元素/组件的过渡
        + 3.1.2.1 过渡的类名 
        + 3.1.2.2 CSS 过渡
        + 3.1.2.3 CSS 动画
        + 3.1.2.4 自定义过渡的类名
        + 3.1.2.5 同时使用过渡与动画
        + 3.1.2.6 显性的过渡持续时间
        + 3.1.2.7 JavaScript 钩子 
    - 3.1.3 初始渲染的过渡
    - 3.1.4 多个元素的过渡
        + 过渡模式
    - 3.1.6 多个组件的过渡
    - 3.1.7 列表过渡
        + 3.1.7.1 列表的进入/离开过渡 
        + 3.1.7.2 列表的排序过渡
        + 3.1.7.3 列表的交错过渡
    - 3.1.8 可复用的过渡
    - 3.1.9 动态过渡
* 3.2 状态过渡
    - 3.2.1 状态动画与侦听器
    - 3.2.2 动态状态过渡
    - 3.2.3 把过渡放到组件里
    - 3.2.4 赋予设计以生命


## 生词(New Words)
- **interpret [ɪn'tɝprɪt] --vt.解释,说明; 解析. --vi.口译**
    + Can you interpret(vt) the passage? 你能解释这一段吗?
    + How do you interpret(vt) this sentence? 你如何解释这一句?
    + He interpreted(vt) those symbols for me. 他为我解说那些符号.
    + The student kindly interpreted(vi) for me. 那个学生亲切地为我口译.
- **interpretation [ɪntɜːprɪ'teɪʃ(ə)n] --n.解释, 翻译**
    + semantic interpretation rule. 语义解释规则. 
    + They put a false interpretation on events. 它们对事件进行了错误的解释. 
    + Everything is your mind, or interpretation of your mind.
        所有事都是你的心, 或者是你心的解释. 
- **transition [træn'zɪʃən] --n.过渡; 转换; 变迁**
    + transition animation. 过渡动画
    + transition duration. 过渡时间
    + a period of transition. 过渡时期
    + Adolescence is the period of transition between childhood and
      adulthood. 青春期是童年与成年之间的过渡时期.



## 内容(Content)

### 0.0 前置知识
- [CSS3 过渡(transition), 转换(transform)和动画(animation) 的知识见仓库:
  CSS-grocery/CSS3-过渡-转换-动画/transition-transform-animation.md](File:///Users/WANG/Github-clone/CSS-grocery/CSS3-过渡-转换-动画/transition-transform-animation.md)


### 3.1 进入/离开 & 列表过渡
##### 3.1.1 概述
- 当我们在 DOM 中插入, 更新或移除选项(items)时, Vue 提供了多种方式去应用
  transition(过渡)效果. 这包括用于: 
    + (1) 自动应用 class 在过渡(transition)和动画(animation) 中
    + (2) 可以配合使用第三方 CSS 动画库, 如 Animate.css
    + (3) 在过渡钩子函数中使用 JavaScript 直接操作 DOM
    + (4) 可以配合使用第三方 JavaScript 动画库, 如 Velocity.js
  
  在这里, 我们只会讲到进入、离开和列表的过渡, 你也可以看下一节的
  `管理过渡状态`(`3.2 状态过渡`).
##### 3.1.2 单元素/组件的过渡
- Vue 提供了 `transition(过渡)` 的封装组件, 在下列情形中,
  可以给任何元素和组件添加进入/离开过渡.
    + (1) 条件渲染 (使用 `v-if`) 
    + (2) 条件展示 (使用 `v-show`)
    + (3) 动态组件
    + (4) 组件根节点
  
  这是一个典型的例子:
  ```vue
    <template>
        <div class="default-div">
            <h2>3.1.2 单元素/组件的过渡</h2>
            <div id="demo">
                <button @click="show = !show">Toggle</button>
                <transition name="fade">
                    <p v-if="show">Hello</p>
                </transition>
            </div>
        </div>
    </template>
    <script>
        export default {
            name: 'Demo312',
            data() {
                return {
                    show: true
                }
            }
        }
    </script>
    <style scoped>
        /* - transition 会自动监听元素从起始状态到终止状态的过渡, 我们不用管中间状态.
         * - 对应这里, 起始状态到终止状态的过渡有 2 种情形:
         *     + (1) fade-enter (到)=> fade-enter-active : 元素的 opacity
         *       从 0 过渡到 1, 过渡持续时间为 0.5s.
         *     + (2) fade-leave-active => fade-leave-to: opacity 从 1 过渡
         *       到 0, 持续时间也为 0.5s.
         */
        .fade-enter-active, .fade-leave-active {
            transition: opacity .5s;
        }
        .fade-enter, .fade-leave-to {
            opacity: 0;
        }
    </style>
  ```
  当插入或删除包含在 `transition` 组件中的元素时, Vue 将会做以下处理:
    + (1) 自动嗅探目标元素是否应用了 CSS 过渡或动画, 如果是, 在恰当的时机添加删除
      CSS 类名.
    + (2) 如果过渡组件提供了 `JavaScript 钩子函数`(下面
      `3.1.2.7 JavaScript 钩子`), 这些钩子函数将在恰当的时机被调用.
    + (3) 如果没有找到 JavaScript 钩子并且也没有检测到 CSS 过渡/动画, DOM 操作
      (插入/删除) 在下一帧中立即执行. (注意: 此指浏览器逐帧动画机制, 和 Vue 的
      `nextTick` 概念不同.)
- **3.1.2.1 过渡的类名**

  在元素 进入(enter)/离开(leave) 的过渡(transition)中, 有 6 个 class 被应用:
    + (1) `v-enter`: 定义进入过渡的开始状态. 在元素被插入到 DOM 之前添加,
      在元素被插入之后的下一帧移除.
    + (2) `v-enter-active`: 元素进入过渡(transition)时被激活,
      应用在整个进入状态. 在元素插入 DOM 的那一刻即被添加,
      过渡(transition / 动画(animation) 完成之后被移除.
      这个类可以也可以用来定义进入过渡的过渡持续时间(transition-duration),
      过渡时间的曲线函数(transition-timing-function)
      以及延迟过渡(transition-delay). (tip: 这里的知识, 在上面的 **前置知识**
      中有详细的讲解).
    + (3) `v-enter-to`: **2.1.8 版本及以上** 定义进入过渡的结束状态.
      在元素被插入之后下一帧生效(与此同时 `v-enter` 被移除), 在 transition(过渡)
      / 动画(animation) 完成之后移除.
    + (4) `v-leave`: 定义离开过渡(leave transition) 的开始状态.
      在离开过渡被触发时立刻生效, 下一帧被移除.
    + (5) `v-leave-active`: 定义离开过渡生效时的状态. 在真个离开过渡的阶段中应用,
      在离开过渡被触发时立即生效, 在过渡/动画完成之后移除.
      这个类同样可以也可以用来定义进入过渡的过渡持续时间(transition-duration),
      过渡时间的曲线函数(transition-timing-function)
      以及延迟过渡(transition-delay).
    + (6) `v-leave-to`: **2.1.8 版及以上** 定义离开过渡的结束状态.
      在离开过渡被触发之后下一帧生效(与此同时 `v-leave` 被删除),
      在过渡/动画完成之后移除.

  <img src="./vue-document-images/transition.png"
        style="margin-left: 0; border-radius: 4px;
          box-shadow: 1px 1px 3px 2px #e5e5e5">
  
  对于这些在过渡中切换的类名来说, 如果你使用一个没有名字的 `<transition>`, 则 `v-`
  是这些类名的默认前缀. 如果你使用了 `<transition name="my-transition">`,
  那么 `v-enter` 会替换为 `my-transition-enter`.

  `v-enter-active` 和 `v-leave-active` 可以控制 进入/离开 过渡的不同的缓和曲线,
  在下面章节会有个示例说明.
    
- **3.1.2.2 CSS 过渡**
    + 常用的过渡都是使用 CSS 过渡. 下面是一个简单例子.
      ```vue
        
      ```
- **3.1.2.3 CSS 动画**
    + CSS 动画用法同 CSS 过渡, 区别是在动画中 `v-enter` 类名在节点插入 DOM
      后不会立即删除, 而是在 `animationend` 事件触发时删除.

      示例: (省略了兼容性前缀)
      ```vue
      ```
- **3.1.2.4 自定义过渡的类名**

- **3.1.2.5 同时使用过渡与动画**

- **3.1.2.6 显性的过渡持续时间**

- **3.1.2.7 JavaScript 钩子**
##### 3.1.3 初始渲染的过渡
##### 3.1.4 多个元素的过渡
- 过渡模式
##### 3.1.6 多个组件的过渡
##### 3.1.7 列表过渡
- 3.1.7.1 列表的进入/离开过渡 
- 3.1.7.2 列表的排序过渡
- 3.1.7.3 列表的交错过渡
##### 3.1.8 可复用的过渡
##### 3.1.9 动态过渡
