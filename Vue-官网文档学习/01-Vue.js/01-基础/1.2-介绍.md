# 1.2 Vue 介绍

## 目录(Catalog)
- 1.2 介绍
    + 1.2.1 `Vue.js` 是什么?
    + 1.2.2 起步
    + 1.2.3 声明式渲染
    + 1.2.4 条件与循环
    + 1.2.5 处理用户输入
    + 1.2.6 组件化应用构建与自定义元素的关系
    + 1.2.7 你准备好了吗?

## 生词(New Words)


## 内容(Content)
### 1.2 介绍
##### 1.2.1 `Vue.js` 是什么?
- Vue (读音 `/vjuː/`, 类似于 view) 是一套用于构建用户界面的渐进式框架.
  与其它大型框架不同的是, Vue 被设计为可以自底向上逐层应用. Vue 的核心库只关注视图层,
  不仅易于上手, 还便于与第三方库或既有项目整合. 另一方面, 
  当与现代化的工具链以及各种支持类库结合使用时, 
  Vue 也完全能够为复杂的单页应用提供驱动. 
##### 1.2.2 起步
- 略
##### 1.2.3 声明式渲染
- Vue.js 的核心是一个允许采用简洁的模板语法来声明式地将数据渲染进 DOM 的系统,
  看下面这个示例:
  ```vue
    // - Notice: Vue 官网文档是使用的 `script` 方式加载 Vue 的,
    //   所以示例都是在 `*.html` 中的写法; 但是上面说了, 我们使用 Vue CLI
    //   生成的模板项目, 所以我们写的代码都是在 `*.vue` 组件内的写法. 
    //   后面的代码同理. 测试示例见: `../../vue-document-learning-example`
    //   Vue CLI 生成模板项目见 Vue CLI 文档.  
    <template>
        <div id="app">
            {{ message }}
        </div>
    </template>

    <script>
        export default {
            name: 'App',
            // - Notice: 在 Vue 中, 组件中的 data 属性, 一定要写成函数形式,
            //   因为组件是要复用的; 例如已创建了 Vue 构造函数, 接下来我们创建 3 个
            //   Vue 构造函数的实例(e.g. vm1, vm2, vm3), Vue 内部会把当前
            //   `export default {}` 这个字面量对象(即: `options`), 处理后, 赋值给
            //   `Vue.prototype.$data`(即: Vue 原型上的 `$data`) 属性,
            //   但是 JS 原型上的属性是被所有实例共享的, 如果 `data` 此时是一个对象
            //   (即: `data: {message: 'Hello Vue!'}`) 
            //   赋值给 $data 那么就会变成这种情形: 
            //   `Vue.prototype.$data = {message: 'Hello Vue!'}`;
            //   现在问题就出现了, 当第一个 vm1 设置了自己想要的 message 值后走开了, 
            //   接着第二个 vm2 就通过 vm2.$data.message = "I have changed!", 
            //   轻而易举就把 message 给更改了... 所以为了解决这种问题, Vue 规定
            //   组件中的 data 属性必须是一个函数(方法), 此函数利用 `return {}`
            //   的方式返回了一个创建的对象字面量对象, 因此每个实例(vm1, vm2,
            //   vm3)可以维护一份被返回对象的独立的拷贝. 
            // - 如果上面没看懂也先不用着急, 详细会在后面的
            //   `1.11.2.1 data 必须是一个函数` 中做详细的示例讲解.
            data() {
                return {
                    message: 'Hello Vue!'
                }
            }
        }
    </script>
  ```
  ```js
    // - ../../vue-document-learning-example/src/main.js
    import Vue from 'vue';
    import App from './App.vue';
    Vue.config.productionTip = false;
    new Vue({
        render: h => h(App),
    }).$mount('#app')
  ```
- 除了上面的 `文本插值`, 我们还可以像这样来绑定元素 `attribute`(特性): 
    + **Added**: attribute 的讲解见仓库: 
      `JS-book-learning/《JavaScript高级程序设计》/Chapter06-面向对象的程序设计`
      `/DOM元素的特性(attribute)和属性(property).md`
  ```vue
    // - 示例路径: `../../vue-document-learning-example/src/components/1.2.3.vue`
    <template>
        <div>
            <span v-bind:title="message">
                鼠标悬停几秒钟会显示此处动态绑定的提示信息!
            </span>
        </div>
    </template>

    <script>
        export default {
            data() {
                return {
                    message: '页面加载于' + new Date().toLocaleString()
                }
            }
        }
    </script>
  ```
  这里我们遇到了一点新东西. 你看到的 `v-bind` attribute(特性) 被称为 `指令`.
  指令带有前缀 `v-`, 以表示它们是 Vue 提供的特殊 `attribute(特性)`. 可能你已经猜到了,
  它们会在渲染的 DOM 上应用特殊的响应式行为. 在这里, 该指令的意思是: 将这个元素节点的
  `title` attribute(特性)和 Vue 实例的 `message` 属性保持一致.

  当然你可以在浏览器中更改 `message` 的值, 安装 `Vue-DevTools` 插件后,
  在 `Components` 组件下, 点击 `<App>` 展开下拉后, 点击 `<Chapter123>`,
  更改右侧的 `message` 后, 点击保存. 鼠标再次移动上面的文字上, 提示内容已经更新了.  

##### 1.2.4 条件与循环
- 控制切换一个元素是否显示也相当简单:
  ```vue
    // - 示例路径: `../../vue-document-learning-example/src/App.vue`
    <template>
        <div id="app">
            <img alt="Vue logo" src="./assets/logo.png">
            <p v-if="seen">现在你看到我了!</p>
            <HelloWorld msg="Welcome to Your Vue.js App"/>
            <Demo123/>
        </div>
    </template>

    <script>
        import HelloWorld from './components/HelloWorld.vue';
        import Demo123 from './components/1.2.3.vue';

        export default {
            name: 'App',
            data() {
                return {
                    seen: true,
                }
            },
            components: {
                HelloWorld,
                Demo123
            }
        }
    </script>
  ```
  继续按照上面的方式在浏览器的 `Vue-DevTools` 中更该 `seen = false`,
  便会发现上面的显示消息消失了.

  这个例子演示了我们不仅可以把数据绑定到 DOM 文本或 attribute, 还可以绑定到 DOM 结构.
  此外, Vue 也提供一个强大的过度效果系统,
  可以在 Vue 插入/更新/移除元素时自动应用`过渡效果`(`./03-过渡与动画.md`)

  还有其它很多指令, 每个都有特殊的功能. 例如, `v-for`
  指令可以绑定数组的数据来渲染一个项目列表:
  ```vue
    // - `App.vue`
    <template>
        <!--其他代码省略-->
        <Demo124/>
    </template>
    <script>
        // 其他 import 省略
        import Demo124 from './components/1.2.4';
        export default {
            name: 'App',
            data() {
                // ...
            }
            components: {
                HelloWorld,
                Demo123,
                Demo124,
            }
        }
    </script>
  ```
  ```vue
    // - 示例路径: `../../vue-document-learning-example/src/components/1.2.4.vue`
    <template>
        <div class="app-4">
            <h2>1.2.4: v-for</h2>
            <ol>
                <li v-for = 'todo in todos' :key="todo.index">
                    {{ todo.text }}
                </li>
            </ol>
        </div>
    </template>

    <script>
        export default {
            name: 'Demo124',
            data() {
                return {
                    todos:[
                        {text: '学习 JavaScript', index: 0},
                        {text: '学习 Vue', index: 1},
                        {text: '建个项目', index: 2},
                    ]
                }
            }
        }
    </script>

    <style scoped>
        .app-4 {
            margin: 10px auto;
            height: 200px;
            width: 400px;
            float: left;
            background: #33cc99;
        }
    </style>
  ```
  在控制台里的 `Vue-DevTools` 左侧选中 `<Demo124>`, 在右侧的 `data` 下的 `todos`
  数组中点击 `+` 号添加一项: `{"text":"添加一项","index":3}`
  (tip: 注意这里添加到数据格式是 `JSON`, 不是对象字面量), 上面的视图中便自动更新.

##### 1.2.5 处理用户输入
- 为了让用户和你的应用进行交互, 我们可以使用 `v-on` 指令添加一个事件监听器,
  通过它调用在 Vue 实例中定义的方法:
  ```js
    // - App.vue: `../../vue-document-learning-example/src/App.vue`
    // - 示例路径: `../../vue-document-learning-example/src/components/1.2.5.vue`
  ```
  注意在 `reverseMessage` 方法中, 我们更新了应用的状态, 但并没有触碰 DOM --
  所有的 DOM 操作都由 Vue 来处理, 你编写的代码只需要关注逻辑层面即可.

  Vue 还提供了 `v-model` 指令, 它能轻松实现表单输入和应用状态之间的双向绑定.
  ```js
    // - App.vue: `../../vue-document-learning-example/src/App.vue`
    // - 示例路径: `../../vue-document-learning-example/src/components/1.2.5.vue`
  ```
##### 1.2.6 组件化应用构建与自定义元素的关系
- 组件系统是 Vue 的另一个重要概念, 因为它是一种抽象, 
  允许我们使用小型、独立和通常可复用的组件构建大型应用. 仔细想想,
  几乎任意类型的应用界面都可以抽象为一个组件树:

  <img src="../vue-document-images/components.png">

  在 Vue 里, **一个组件本质上是一个拥有预定义选项的一个 Vue 实例**.
  在 Vue 中注册组件很简单:
  ```js
    // -定义名为 todo-item 的新组件
    Vue.component('todo-item', {
        template: '<li>这是一个代办项</li>'
    })
    var app = new Vue(...)
  ```
  现在你可以用它构建另一个组件模板:
  ```vue
    <ol>
        <!-- 创建一个 todo-item 组件的实例 -->
        <todo-item></todo-item>
    </ol>
  ```
  ......

  Vue 文档中接下来给出了一个组件示例, 我觉得实际上并不合适, 因为其中牵扯到很多东西,
  组件后面会讲到, 这个示例就暂时先略过......
- **与自定义元素的关系**: 
    + 你可能已经注意到 Vue 组件非常类似于**自定义元素**
      (e.g. `App.vue` 文件 `template` 内的 `<HelloWorld>`) --
      它是 `Web 组件规范`的一部分, 这是因为 Vue 的组件语法部分参考了该规范.
      例如 Vue 组件实现了 `Slot API` 与 `is` attribute.
      但是, 还是有几个关键差别:
        - Web Components 规范已经完成并通过, 但未被所有浏览器原生实现. 目前
          Safari 10.1+、Chrome 54+ 和 Firefox 63+ 原生支持 Web Components.
          相比之下, Vue 组件不需要任何 polyfill, 并且在所有支持的浏览器
          (IE9 及更高版本) 之下表现一致. 必要时, 
          Vue 组件也可以包装于原生自定义元素之内. 
        - Vue 组件提供了纯自定义元素所不具备的一些重要功能,
          最突出的是跨组件数据流、自定义事件通信以及构建工具集成. 
    + 虽然 Vue 内部没有使用自定义元素, 不过在应用使用自定义元素、
      或以自定义元素形式发布时, 依然有很好的互操作性. Vue CLI 也支持将 Vue
      组件构建成为原生的自定义元素. 
##### 1.2.7 你准备好了吗?
- 我们刚才简单介绍了 Vue
  核心最基本的功能——本教程的其余部分将更加详细地涵盖这些功能以及其它高级功能,
  所以请务必读完整个教程!
